{"version":3,"file":"index.js","sources":["../src/api.js","../src/img/star-full.svg","../src/img/star-empty.svg","../src/img/star-half.svg","../src/js/feedback.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const api = axios.create({\n  baseURL: 'https://furniture-store.b.goit.study/api',\n  timeout: 5000,\n});\n\n","export default \"data:image/svg+xml,%3csvg%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5709%201.19133C9.91464%200.326847%2011.0854%200.326848%2011.4291%201.19133L13.4579%206.29368C13.6029%206.65813%2013.9306%206.90714%2014.3067%206.93868L19.5727%207.38029C20.4649%207.45511%2020.8267%208.61981%2020.1469%209.22891L16.1348%2012.8239C15.8483%2013.0807%2015.723%2013.4837%2015.8106%2013.8675L17.0364%2019.2428C17.244%2020.1535%2016.2969%2020.8734%2015.533%2020.3854L11.0246%2017.5048C10.7025%2017.2991%2010.2975%2017.2991%209.9755%2017.5048L5.467%2020.3854C4.70312%2020.8734%203.75596%2020.1535%203.96364%2019.2428L5.18943%2013.8675C5.27699%2013.4837%205.15183%2013.0807%204.86527%2012.8239L0.853063%209.22891C0.173281%208.61981%200.535068%207.45511%201.42729%207.38029L6.69337%206.93868C7.06952%206.90714%207.39717%206.65813%207.54208%206.29368L9.5709%201.19133Z'%20fill='%23080C09'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%20.587l3.668%207.431%208.209%201.192-5.938%205.787%201.403%208.175L12%2018.896l-7.342%203.877%201.403-8.175L.123%209.21l8.209-1.192L12%20.587z'%20fill='%23E0E0E0'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.393%207.9851L20.4727%208.24826C20.5383%208.44688%2020.4831%208.66762%2020.3331%208.80615L15.4865%2013.1745L16.9225%2019.7218C16.9711%2019.9311%2016.8965%2020.1508%2016.733%2020.2797L16.5136%2020.4376C16.4284%2020.5081%2016.3227%2020.5453%2016.2145%2020.5429C16.1231%2020.5449%2016.0332%2020.5193%2015.9552%2020.4692L10.5002%2016.964L5.07514%2020.4692C4.99714%2020.5193%204.90717%2020.5449%204.81585%2020.5429C4.7076%2020.5453%204.60189%2020.5081%204.51668%2020.4376L4.26736%2020.2797C4.10386%2020.1508%204.02926%2019.9311%204.07788%2019.7218L5.51393%2013.1745L0.677238%208.81667C0.519508%208.67897%200.459802%208.4521%200.52765%208.24826L0.637348%207.9851C0.695676%207.77713%200.871037%207.6299%201.07614%207.61669L7.44861%207.07985L9.89188%200.879924C9.97017%200.674026%2010.1604%200.540173%2010.3706%200.543086H10.6298C10.8381%200.538421%2011.0263%200.673661%2011.0985%200.879924L13.5817%207.07985L19.9542%207.61669C20.1593%207.6299%2020.3346%207.77713%2020.393%207.9851ZM14.6089%2017.4482L13.492%2012.5219L17.1519%209.22719L12.3551%208.8272L10.5002%204.13252V14.8061L14.6089%2017.4482Z'%20fill='%23080C09'%20/%3e%3c/svg%3e\"","\nimport Raty from 'raty-js';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\n\nimport { api } from '../api.js';\nimport starOn from '../img/star-full.svg';\nimport starOff from '../img/star-empty.svg';\nimport starHalf from '../img/star-half.svg';\n\nfunction roundRating(value) {\n  if (value >= 3.3 && value <= 3.7) return 3.5;\n  if (value >= 3.8 && value <= 4.2) return 4;\n  return Math.round(value * 2) / 2;\n}\n\nexport async function initFeedback() {\n  const list = document.querySelector('.feedback-list');\n  if (!list) return;\n\n  try {\n    // \n    const { data } = await api.get('/feedbacks', {\n  params: {\n    limit: 10,\n    page: 1,\n  },\n});\n    \n    // const items = Array.isArray(data) ? data.slice(0, 10) : (data.results || []).slice(0, 10);\n    const items = Array.isArray(data.feedbacks) ? data.feedbacks.slice(0, 10) : [];\n    // console.log(data);\n\n    const markup = items\n       .map(item => {\n    const rating = roundRating(item.rate ?? 0);  // <-- заменили rating → rate\n    const text = item.descr || '';               // <-- заменили comment → descr\n    const user = item.name || 'Анонім';          // <-- name — уже подходит\n    return `\n          <li class=\"feedback-item swiper-slide\">\n            <div class=\"feedback-rating\" data-score=\"${rating}\"></div>\n            <p class=\"feedback-text text\">${text}</p>\n            <p class=\"feedback-user\">${user}</p>         \n          </li>\n        `;\n      })\n      .join('');\n\n    list.innerHTML = markup;\n\n    list.querySelectorAll('.feedback-rating').forEach(el => {\n      const score = parseFloat(el.dataset.score);\n      const raty = new Raty(el, {\n        readOnly: true,\n        score,\n        starOn,\n        starOff,\n        starHalf,\n        half: true,\n      });\n      raty.init();\n    });\n\n        new Swiper('.feedback-swiper', {\n      modules: [Navigation, Pagination],\n      navigation: {\n        nextEl: '.feedback-next',\n        prevEl: '.feedback-prev',\n      },\n            pagination: {\n        el: '.feedback-pagination-list',\n        clickable: true,\n        bulletClass: 'feedback-pagination-item',\n        bulletActiveClass: 'is-active',\n        renderBullet: (index, className) => `<li class=\"${className}\"></li>`,\n      },\n    });\n\n\n  } catch (err) {\n    console.error('Failed to load feedbacks', err);\n  }\n}\n\n\n\n","import { api } from './api.js';\nimport { initFeedback } from './js/feedback.js';\n\ninitFeedback();"],"names":["api","axios","starOn","starOff","starHalf","roundRating","value","initFeedback","list","data","markup","item","rating","text","user","el","score","Raty","Swiper","Navigation","Pagination","index","className","err"],"mappings":"kxBAEO,MAAMA,EAAMC,EAAM,OAAO,CAC9B,QAAS,2CACT,QAAS,GACX,CAAC,ECLcC,EAAA,m8BCAAC,EAAA,0UCAAC,EAAA,2yCCYf,SAASC,EAAYC,EAAO,CAC1B,OAAIA,GAAS,KAAOA,GAAS,IAAY,IACrCA,GAAS,KAAOA,GAAS,IAAY,EAClC,KAAK,MAAMA,EAAQ,CAAC,EAAI,CACjC,CAEO,eAAeC,GAAe,CACnC,MAAMC,EAAO,SAAS,cAAc,gBAAgB,EACpD,GAAKA,EAEL,GAAI,CAEF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMT,EAAI,IAAI,aAAc,CAC/C,OAAQ,CACN,MAAO,GACP,KAAM,CACP,CACH,CAAC,EAMSU,GAHQ,MAAM,QAAQD,EAAK,SAAS,EAAIA,EAAK,UAAU,MAAM,EAAG,EAAE,EAAI,CAAA,GAIxE,IAAIE,GAAQ,CAChB,MAAMC,EAASP,EAAYM,EAAK,MAAQ,CAAC,EACnCE,EAAOF,EAAK,OAAS,GACrBG,EAAOH,EAAK,MAAQ,SAC1B,MAAO;AAAA;AAAA,uDAE4CC,CAAM;AAAA,4CACjBC,CAAI;AAAA,uCACTC,CAAI;AAAA;AAAA,SAG3C,CAAO,EACA,KAAK,EAAE,EAEVN,EAAK,UAAYE,EAEjBF,EAAK,iBAAiB,kBAAkB,EAAE,QAAQO,GAAM,CACtD,MAAMC,EAAQ,WAAWD,EAAG,QAAQ,KAAK,EAC5B,IAAIE,EAAKF,EAAI,CACxB,SAAU,GACV,MAAAC,EACA,OAAAd,EACA,QAAAC,EACA,SAAAC,EACA,KAAM,EACd,CAAO,EACI,KAAI,CACf,CAAK,EAEG,IAAIc,EAAO,mBAAoB,CACjC,QAAS,CAACC,EAAYC,CAAU,EAChC,WAAY,CACV,OAAQ,iBACR,OAAQ,gBACT,EACK,WAAY,CAChB,GAAI,4BACJ,UAAW,GACX,YAAa,2BACb,kBAAmB,YACnB,aAAc,CAACC,EAAOC,IAAc,cAAcA,CAAS,SAC5D,CACP,CAAK,CAGF,OAAQC,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,CAC9C,CACH,CCjFAhB,EAAc"}